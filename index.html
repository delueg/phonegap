<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html class="ui-mobile"><head><base href="file:///Users/sdelueg/var/www/phonegap/index.html"> 
	<title>My Page</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css">
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body class="ui-mobile-viewport ui-overlay-c"> 

<div data-role="page" data-url="/Users/sdelueg/var/www/phonegap/index.html" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 959px;">

	<div data-role="header" class="ui-header ui-bar-a" role="banner">
		<h1 class="ui-title" role="heading" aria-level="1">My Title</h1>
	</div><!-- /header -->

	<div data-role="content" class="ui-content" role="main">	
		<div data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" data-icon="null" data-iconpos="null" data-theme="c" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-up-c" aria-disabled="false"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Hol mir die Daten</span></span><button id="button" class="ui-btn-hidden" aria-disabled="false">Hol mir die Daten</button></div>
		<div id="data_holder"></div>
	</div><!-- /content -->

</div><!-- /page -->


<script>

var master = {
		
		ajaxCall : function( callObject )
		{						
			if( typeof callObject.key != "undefinied" )
			{
				$.ajax({
					url: 'http://dlyx.de/phonegap/calling.php?key='+callObject.key,
					async: true,
					type: "POST",
					datatype: "jsonp",
					cache: false,
					data: callObject.postData,
					success: function(data_json, status, jqXHR)
					{
						data = jQuery.parseJSON(data_json);
						if( data.success == true )
						{	
							if( typeof callObject.onSuccessFunc != "undefined" )
							{
								callObject.onSuccessFunc();
							}		
							else if( typeof callObject.onErrorFunc != "undefined")
							{							
								callObject.onErrorFunc();						
							}
						
						}
					}
				});
			}
			else
			{
				alert("ajaxCall() - callObject property >key< is not specified!");
				//master.layer({id:new Date().getTime(),content:'<p>Some error occured!</p>',btn:true});
			}
		}
}

var obj = {};

obj.key = "getData";
obj.onSuccessFunc = function(data){
	$("#data_holder").html(data.html);
}

$("#button").click(function(){
	master.ajaxCall(obj);
})

</script>



	
<div class="ui-loader ui-corner-all ui-body-a ui-loader-default"><span class="ui-icon ui-icon-loading"></span><h1>loading</h1></div></body></html>